# HSEBank

## Общая идея решения


### Основной функционал
- Создание, редактирование и удаление счетов
- Создание, редактирование и удаление операций
- Автоматический пересчет баланса счетов при операциях
- Сохранение данных в три разных файла
- Луковая архитектура с DI

### Изменения в функциональных требованиях
- Добавлена поддержка команд с отменой операций
- Категории я решил сделать неизменяемые, так как хотел реализовать паттерн легковес, а для этого мне нужен пулл всех возможных категорий. Ну в целом, если смотреть на тинькоф, то там тоже категории неизменяемые

## Принципы SOLID и GRASP

### SOLID принципы

#### 1. SRP
- `BankRepository` - отвечает только за работу с сохранением даных
- `BankService` - отвечает только за бизнес логику
- `DataTransferService` - отвечает только за работу с файлами

#### 2. OCP
- Благодаря паттерну посетитель можно расширять функционал `BankAccount` и `Operation` не меняя код классов.

#### 3. LSP
- Все реализации интерфейсов (`BankAccountRepository`, `CategoryRepository`) взаимозаменяемы

#### 4. ISP
- Разделенные интерфейсы: `IInvoker`, `IPrototype`
- Узкоспециализированные контракты вместо одного общего интерфейса

#### 5. DIP
- Все зависимости внедряются через конструкторы
- Высокоуровневые модули зависят от абстракций (`IBankRepository`), а не от конкретных реализаций

### GRASP принципы

#### 1. High Cohesion
-  Доменная модель описывает все обьекты бизнес логики
-  Модуль сервисов определяет всю бизнес логику
-  Модуль репозиториев определяет всю логику хранения данных

#### 2. Low Coupling
- Компоненты связаны только через интерфейсы
- DI-контейнер управляет зависимостями

#### 3. Creator
- Фабрики (`BankFactory`) создают доменные объекты

#### 4. Controller
- Сервисы выступают в роли контроллеров

#### 5. Pure Fabrication
- `IBankCommand` - искусственный класс для устранения дублирования кода при создании новых команд

## Паттерны GoF

### 1. Фабрика (Factory)
**Реализация:** `BankFactory`
**Важность:** Централизация создания объектов, поддержка пула обьектов для паттерна легковес

### 2. Фасад (Facade) (Сервисы, они идеалогически похожи на фасад, договорились, что это будет зачтенено t.me.verevka8)
**Реализация:** `BankService`, `DataTransferService`
**Важность:** Разбиение сложной бизнес логики, предоставление единого сервиса для групп операций

### 3. Команда (Command)
**Реализация:** `ICommand`, `IBankCommand`, `CreateBankAccountCommand`  
**Важность:** Инкапсуляция запросов как объектов, поддержка отмены операций, очередь команд  
**Классы:** `Command/`

### 4. Декоратор (Decorator)
**Реализация:** `DecoratorWorkingTimeCommand`
**Важность:** Динамическое добавление функциональности без изменения основного кода, в данном случае подсчет времени выполнение сценария

### 5. Шаблонный метод (Template Method)
**Реализация:** `BankDataImporter`
**Важность:** Определение основной логики алгоритма с изменяемыми шагами в наследуемых классах

### 6. Посетитель (Visitor)
**Реализация:** `IExportVisitor`
**Важность:** Добавление новой логики для классов без внесения изменений в код

### 7. Прототип
**Реализация:** `BankAccount`, `Operation`
**Важность:** Создание копий обьекта, чтобы обезопасить слой репозиториев от клиенского кода при возвращении обьектов

### 8. Легковес
**Реализация:** `BankFactory`,
**Важность:** Уменьшение используемой памяти приложения, путем выдачи ссылой на общую часть обьектов

## Инструкция по запуску
   ```bash
   dotnet run --project ./HSE-Bank/HSE-Bank.csproj
```

### Доп инфа
- Сервисы считаются за паттерн фасад, так как идеалогически в данной ситуации это одно и то же
- файлы сохраняются в `./HSE-Bank/HSEBankDemo`